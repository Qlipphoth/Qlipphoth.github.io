<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Qliphoth's Blog</title><meta name="author" content="Qliphoth"><meta name="copyright" content="Qliphoth"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="ffffff"><meta name="description" content="See You Next Game">
<meta property="og:type" content="website">
<meta property="og:title" content="Qliphoth&#39;s Blog">
<meta property="og:url" content="https://qlipphoth.github.io/page/5/index.html">
<meta property="og:site_name" content="Qliphoth&#39;s Blog">
<meta property="og:description" content="See You Next Game">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://s2.loli.net/2023/08/12/NkcT1PLmZVj5iY3.png">
<meta property="article:author" content="Qliphoth">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://s2.loli.net/2023/08/12/NkcT1PLmZVj5iY3.png"><link rel="shortcut icon" href="https://s2.loli.net/2023/08/12/NkcT1PLmZVj5iY3.png"><link rel="canonical" href="https://qlipphoth.github.io/page/5/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: 'days',
  dateSuffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: {"limitCount":500,"languages":{"author":"Author: Qliphoth","link":"Link: ","source":"Source: Qliphoth's Blog","info":"Copyright is owned by the author. For commercial reprints, please contact the author for authorization. For non-commercial reprints, please indicate the source."}},
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Qliphoth\'s Blog',
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2024-10-24 09:00:25'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          const now = new Date()
          const hour = now.getHours()
          const isNight = hour <= 10 || hour >= 18
          if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
          else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/css/custom/beauty.css" media="defer" onload="this.media='all'"><!-- hexo injector head_end start --><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Zfour/hexo-electric-clock@1.0.6/clock.css"><link rel="stylesheet" href="/css/runtime.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://unpkg.zhimg.com/hexo-butterfly-swiper/lib/swiper.min.css" media="print" onload="this.media='all'"><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://s2.loli.net/2023/08/12/NkcT1PLmZVj5iY3.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">123</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">21</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">21</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/talk/"><i class="fa-fw fas fa-comment-dots"></i><span> Talk</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw far fa-heart"></i><span> About</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="full_page" id="page-header" style="background-image: url('https://s2.loli.net/2023/12/02/GXjKIgFLskvSHTi.png')"><nav id="nav"><span id="blog-info"><a href="/" title="Qliphoth's Blog"><span class="site-name">Qliphoth's Blog</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/talk/"><i class="fa-fw fas fa-comment-dots"></i><span> Talk</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw far fa-heart"></i><span> About</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="site-info"><h1 id="site-title">Qliphoth's Blog</h1><div id="site-subtitle"><span id="subtitle"></span></div><div id="site_social_icons"><a class="social-icon" href="https://github.com/qlipphoth" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="https://space.bilibili.com/33030427" target="_blank" title="Bilibili"><i class="fab fa-bilibili" style="color: #FB7299;"></i></a><a class="social-icon" href="mailto:1841362281@qq.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a></div></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="post_cover left"><a href="/2023/12/04/2023-12-4-1/" title="C++ 补完计划（二）：类的大小"><img class="post-bg" src="https://s2.loli.net/2023/08/12/a6FceKmItYSsW7b.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="C++ 补完计划（二）：类的大小"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/12/04/2023-12-4-1/" title="C++ 补完计划（二）：类的大小">C++ 补完计划（二）：类的大小</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time class="post-meta-date-created" datetime="2023-12-04T23:19:45.000Z" title="Created 2023-12-04 23:19:45">2023-12-04</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2024-10-24T08:59:28.000Z" title="Updated 2024-10-24 08:59:28">2024-10-24</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/NERV/">NERV</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/NERV/C/">C++</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/C/">C++</a></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-comments"></i><a class="twikoo-count" href="/2023/12/04/2023-12-4-1/#post-comment"><i class="fa-solid fa-spinner fa-spin"></i></a><span class="article-meta-label"> comments</span></span></div><div class="content">
本文转载自 C++类大小详尽讲解

C++ 类的大小
与类大小有关的因素：普通成员变量，虚函数，继承（单一继承，多重继承，重复继承，虚拟继承）; 与类大小无关的因素：静态成员变量，静态成员函数及普通成员函数。
内存对齐
由于在分析类的大小时会经常涉及到内存对齐的概念，因此这里先总结一下相关的知识点。


内存对齐的原因： 关键在于CPU存取数据的效率问题。为了提高效率，计算机从内存中取数据是按照一个固定长度的。比如在32位机上，CPU每次都是取32bit数据的，也就是4字节；若不进行对齐，要取出两块地址中的数据，进行掩码和移位等操作，写入目标寄存器内存，效率很低。内存对齐一方面可以节省内存，一方面可以提升数据读取的速度；


内容： 内存对齐指的是C++结构体中的数据成员，其内存地址是否为其对齐字节大小的倍数。


对齐原则：

结构体变量的首地址能够被其最宽基本类型成员的对齐值所整除；
结构体内每一个成员的相对于起始地址的偏移量能够被该变量的大小整除；
结构体总体大小能够被最宽成员大小整除；如果不满足这些条件，编译器就会进行一个填充(padding)。



#pragma pac ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2023/11/13/2023-11-13-1/" title="GASDocumentation 案例项目分析（四）"><img class="post-bg" src="https://s2.loli.net/2023/11/14/5P1WOjDbn8GrQIS.gif" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="GASDocumentation 案例项目分析（四）"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/11/13/2023-11-13-1/" title="GASDocumentation 案例项目分析（四）">GASDocumentation 案例项目分析（四）</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time class="post-meta-date-created" datetime="2023-11-13T21:51:33.000Z" title="Created 2023-11-13 21:51:33">2023-11-13</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2024-10-24T08:59:28.000Z" title="Updated 2024-10-24 08:59:28">2024-10-24</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/UE/">UE</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/UE/GAS/">GAS</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/UE/">UE</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/GAS/">GAS</a></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-comments"></i><a class="twikoo-count" href="/2023/11/13/2023-11-13-1/#post-comment"><i class="fa-solid fa-spinner fa-spin"></i></a><span class="article-meta-label"> comments</span></span></div><div class="content">前言
上一节我们分析了 FireGun 技能的整个流程，想必大家已经对 GAS 的使用有了一个初步的了解了，也大致知道了 GA、GE、GC 这些概念以及如何相互调用。本节就来继续分析另一个技能，Meteor。
Meteor
这个技能也是由纯蓝图创建的，技能整体流程包括目标确认、技能消耗、技能冷却、技能本体（陨石）、击中伤害与眩晕、击中效果（倒地）等组成，相比于 FireGun 要更为复杂。让我们逐一分析。
GA_Meteor_BP
这个蓝图就是 Meteor 技能的 GA 了，同样继承自 GDGameplayAbility。来分析蓝图中实现了哪些功能。
作为一个 GA，最重要的肯定还是重写 ActivateAbility。

首先还是从 ActorInfo 中获取了释放者的信息并且存在了 OwningHero 变量中。

其次是关于一些辅助信息显示的设置以及移动相机，在释放这种需要瞄准的技能时，移动相机是一个不错的做法，可以使视野开阔一些。

随后就是较为重要的瞄准部分了，这里先获取了 OwnerActor 即释放者的位置，再向前移动 200 个单位作为瞄准的初始位置。随后也启动了一个 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2023/11/12/2023-11-12-1/" title="GASDocumentation 案例项目分析（三）"><img class="post-bg" src="https://s2.loli.net/2023/11/11/gjWYPFRMALU6H8r.gif" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="GASDocumentation 案例项目分析（三）"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/11/12/2023-11-12-1/" title="GASDocumentation 案例项目分析（三）">GASDocumentation 案例项目分析（三）</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time class="post-meta-date-created" datetime="2023-11-12T14:08:00.000Z" title="Created 2023-11-12 14:08:00">2023-11-12</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2024-10-24T08:59:28.000Z" title="Updated 2024-10-24 08:59:28">2024-10-24</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/UE/">UE</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/UE/GAS/">GAS</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/UE/">UE</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/GAS/">GAS</a></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-comments"></i><a class="twikoo-count" href="/2023/11/12/2023-11-12-1/#post-comment"><i class="fa-solid fa-spinner fa-spin"></i></a><span class="article-meta-label"> comments</span></span></div><div class="content">前言
上回说到，FireGun 这个类有一个名为 DamageGameplayEffect 的 GE 用于伤害计算以及击中特效播放，并且最终通过 Projectile-&gt;DamageEffectSpecHandle 的形式将该 GE 传递给了 Projectile。不难想象最终一定会由子弹本身的碰撞等事件来执行该 GE 以计算伤害（DamageExecCalc）及播放 GC。
12UPROPERTY(BlueprintReadOnly, EditAnywhere)TSubclassOf&lt;UGameplayEffect&gt; DamageGameplayEffect;
上一节主要分析了前者，即 GDDamageExecCalculation  的实现，本节就从 GameplayCue（GC）开始分析。
GameplayCue
首先来看一下文档中关于 GC 的解释：
GASDocumentation_Chinese:GameplayCue
GameplayCue(GC) 执行非游戏逻辑相关的功能, 像音效, 粒子效果, 镜头抖动等等。 GameplayCue 一般是可同步(除 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2023/11/11/2023-11-11-1/" title="GASDocumentation 案例项目分析（二）"><img class="post-bg" src="https://s2.loli.net/2023/11/12/YE1PLFJBUQekhf8.gif" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="GASDocumentation 案例项目分析（二）"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/11/11/2023-11-11-1/" title="GASDocumentation 案例项目分析（二）">GASDocumentation 案例项目分析（二）</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time class="post-meta-date-created" datetime="2023-11-11T15:55:27.000Z" title="Created 2023-11-11 15:55:27">2023-11-11</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2024-10-24T08:59:28.000Z" title="Updated 2024-10-24 08:59:28">2024-10-24</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/UE/">UE</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/UE/GAS/">GAS</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/UE/">UE</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/GAS/">GAS</a></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-comments"></i><a class="twikoo-count" href="/2023/11/11/2023-11-11-1/#post-comment"><i class="fa-solid fa-spinner fa-spin"></i></a><span class="article-meta-label"> comments</span></span></div><div class="content">前言
上一节我们分析了 GASDocumentation 中与 GAS 相关的一些类的设计，本节就开始分析具体技能的实现。
技能的实现
查看 BP_HeroCharacter 蓝图，会发现在 Abilities.CharacterAbilities 下挂载了 7 个技能，上一节也分析过，CharacterAbilities 会在开局就全部赋予玩家，让我们一一分析。

Jump
项目中，为了演示非实例化的技能是如何使用的，把 Jump 也作为一个技能配置了，这个技能是 C++ 实现的。查看相应的类：
123456789101112131415161718192021222324252627282930313233343536/** * Makes the Character try to jump using the standard Character-&gt;Jump.  * This is an example of a non-instanced ability. */UCLASS()class GASDOCUMENTATION_API UGDGA_CharacterJump : ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2023/11/10/2023-11-10-1/" title="GASDocumentation 案例项目分析（一）"><img class="post-bg" src="https://s2.loli.net/2023/11/10/zXw1uyBSA4fYKeL.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="GASDocumentation 案例项目分析（一）"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/11/10/2023-11-10-1/" title="GASDocumentation 案例项目分析（一）">GASDocumentation 案例项目分析（一）</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time class="post-meta-date-created" datetime="2023-11-10T22:43:39.000Z" title="Created 2023-11-10 22:43:39">2023-11-10</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2024-10-24T08:59:28.000Z" title="Updated 2024-10-24 08:59:28">2024-10-24</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/UE/">UE</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/UE/GAS/">GAS</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/UE/">UE</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/GAS/">GAS</a></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-comments"></i><a class="twikoo-count" href="/2023/11/10/2023-11-10-1/#post-comment"><i class="fa-solid fa-spinner fa-spin"></i></a><span class="article-meta-label"> comments</span></span></div><div class="content">前言
终于准备开新坑啦！终于使用了一次正常封面 在 STL 系列基本写完之后就摸了挺久的，其实这段时间也没有闲着，把 MP-TPS 的那个教程基本看完了，现在只剩第一部分的联机插件没有实现，准备最近开始继续更新 MP-TPS 系列，把这个项目的内容好好总结一下。
说回正题，目前的准备是将 GAS 结合到这个项目中，因此有必要好好学习一下 GAS 系统。但是总所周知，GAS 系统虽功能强大，学习曲线却异常陡峭，本来打算通过看 ActionRPG 项目的方式来学习 GAS，奈何这个项目本身也十分复杂。最后，在机缘巧合之下终于找到了这个项目———— GASDocumentation 以及某位好心人翻译的中文版 GASdocumentation_Chinese，感谢这些开源贡献者。
GASDocumentation 这个项目提供了十分完善的 GAS 文档，包含了 GAS 系统的各个模块的详细介绍，虽说没有细到分析源码的地步，但作为入门阶段的百科全书已经十分优秀了。除此之外，该项目还自带了一个同名的 UE4 工程，简单展示了 GAS 的使用方法，可以说是无比良心了。
相比于 ActionRPG， ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2023/10/30/2023-10-30-1/" title="从零开始的 STL 实现记录：Adapter-2"><img class="post-bg" src="https://s2.loli.net/2023/08/18/cDqb7yXhnK6rkpN.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="从零开始的 STL 实现记录：Adapter-2"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/10/30/2023-10-30-1/" title="从零开始的 STL 实现记录：Adapter-2">从零开始的 STL 实现记录：Adapter-2</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time class="post-meta-date-created" datetime="2023-10-30T12:27:28.000Z" title="Created 2023-10-30 12:27:28">2023-10-30</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2024-10-24T08:59:28.000Z" title="Updated 2024-10-24 08:59:28">2024-10-24</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/C/">C++</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/C/STL/">STL</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/C/">C++</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/STL/">STL</a></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-comments"></i><a class="twikoo-count" href="/2023/10/30/2023-10-30-1/#post-comment"><i class="fa-solid fa-spinner fa-spin"></i></a><span class="article-meta-label"> comments</span></span></div><div class="content">前言
上一节介绍了 iterator adapter 的内容，本节将介绍 adapter 家族的最后一部分成员：functor adapter。
functor adapter 是所有配接器中数量最庞大的一类，配接灵活程度非常高，通过它们之间的绑定、组合与修饰，几乎可以创造出各种表达式。
如同 container adapters 内藏了一个 container member 一样、或是像 reverse iterator （adapters）内藏了一个 iterator mermber 一样、或是像 stream iterator（adapters）内藏了一个 pointer to stream 一样，或是像 insert iterator （adapters）内藏了一个 pointer to container （并因而得以取其 iterator）一样，每一个 function adapters 也内藏了一个member object，其型别等同于它所要配接的对象（那个对象当然是一个“可配接的仿函数”，adaptable functor）。当 function adapter 有了 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2023/10/29/2023-10-29-1/" title="从零开始的 STL 实现记录：Adapter-1"><img class="post-bg" src="https://s2.loli.net/2023/08/18/cDqb7yXhnK6rkpN.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="从零开始的 STL 实现记录：Adapter-1"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/10/29/2023-10-29-1/" title="从零开始的 STL 实现记录：Adapter-1">从零开始的 STL 实现记录：Adapter-1</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time class="post-meta-date-created" datetime="2023-10-29T20:11:32.000Z" title="Created 2023-10-29 20:11:32">2023-10-29</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2024-10-24T08:59:28.000Z" title="Updated 2024-10-24 08:59:28">2024-10-24</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/C/">C++</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/C/STL/">STL</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/C/">C++</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/STL/">STL</a></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-comments"></i><a class="twikoo-count" href="/2023/10/29/2023-10-29-1/#post-comment"><i class="fa-solid fa-spinner fa-spin"></i></a><span class="article-meta-label"> comments</span></span></div><div class="content">前言
配接器（adapters）在 STL 组件的灵活组合运用功能上，扮演着轴承、转换器的角色。Adapter 这个概念，事实上是一种设计模式。 《Design Patterns》一书中对 adapter 样式的定义如下：将一个类的接口转换为另一个类的接口，使原本因接口不兼容而不能合作的类，可以一起运作。
STL 中所提供的配接器，按照配接的对象可以分为三类：

改变 Container 接口的配接器：Containers Adapter
改变 Iterator  接口的配接器：Iterators  Adapter
改变 Functor   接口的配接器：Functors   Adapter

其中，container Adapter 已经在前面介绍 stack &amp; queue 中介绍过，这两个容器都是通过修饰 deque 接口的方式呈现出另一种容器的样子，这里就不再介绍了。本节将重点介绍 Iterator Adapter 的内容。
Iterator Adapter
STL 提供了许多应用于迭代器身上的配接器，包括 insert iterators、reverse iterat ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2023/10/25/2023-10-25-1/" title="从零开始的 STL 实现记录：Functor"><img class="post-bg" src="https://s2.loli.net/2023/08/18/cDqb7yXhnK6rkpN.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="从零开始的 STL 实现记录：Functor"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/10/25/2023-10-25-1/" title="从零开始的 STL 实现记录：Functor">从零开始的 STL 实现记录：Functor</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time class="post-meta-date-created" datetime="2023-10-25T18:33:54.000Z" title="Created 2023-10-25 18:33:54">2023-10-25</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2024-10-24T08:59:28.000Z" title="Updated 2024-10-24 08:59:28">2024-10-24</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/C/">C++</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/C/STL/">STL</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/C/">C++</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/STL/">STL</a></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-comments"></i><a class="twikoo-count" href="/2023/10/25/2023-10-25-1/#post-comment"><i class="fa-solid fa-spinner fa-spin"></i></a><span class="article-meta-label"> comments</span></span></div><div class="content">前言
本节开始，将会分析 STL 中的仿函数（Functor）部分的内容。在进入这一章之前，让我们回顾一下到目前为止我们都实现了哪些内容。
首先，我们实现了 Allocator，这个组件负责空间的分配，是其他组件实现的基石；随后我们实现了 Iterator，它是沟通容器与算法之间的桥梁，有了迭代器，才能使算法完全在一个抽象的层面上工作，对于泛型编程的实现十分重要；紧接着我们实现了各种 Container，包括顺序容器与关联容器等，容器是大多数人对 STL 的第一印象，也是最经常被使用的组件；最后我们实现了一大堆的 Algorithm，可以在容器上实现各种各样的操作，如 sort，rotate 等。
到目前为止，似乎已经比较完美了，既然如此，最后的 Functor 与 Adaptor 又有怎样的重要作用呢？
可以这么说，如果把目前为止实现的 STL 内容，比作原版的 MC 的话，那 Functor 和 Adaptor 就是 MC 的 Mod 接口。
是的，即使目前为止的功能已经足够解决大部分编程问题，但它们终究是封闭的，algorithm.h 中的算法虽然多，但总是有限。而 Functo ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2023/10/23/2023-10-23-1/" title="从零开始的 STL 实现记录：Algorithm-4.5"><img class="post-bg" src="https://s2.loli.net/2023/08/18/cDqb7yXhnK6rkpN.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="从零开始的 STL 实现记录：Algorithm-4.5"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/10/23/2023-10-23-1/" title="从零开始的 STL 实现记录：Algorithm-4.5">从零开始的 STL 实现记录：Algorithm-4.5</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time class="post-meta-date-created" datetime="2023-10-23T16:37:24.000Z" title="Created 2023-10-23 16:37:24">2023-10-23</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2024-10-24T08:59:28.000Z" title="Updated 2024-10-24 08:59:28">2024-10-24</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/C/">C++</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/C/STL/">STL</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/C/">C++</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/STL/">STL</a></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-comments"></i><a class="twikoo-count" href="/2023/10/23/2023-10-23-1/#post-comment"><i class="fa-solid fa-spinner fa-spin"></i></a><span class="article-meta-label"> comments</span></span></div><div class="content">前言
本节是算法部分的最后一小节了，将会主要介绍 stl_algo.h 中的 sort()，以排序函数作为压轴倒也十分合理，毕竟无论是面试还是工作或学习中的使用，排序都是最经常被提及的一个话题。稍后将会看到，作为对效率有着很高追求的 STL，对于 sort() 函数的设计，依然十分精彩。
sort
STL 所提供的各式各样算法中，sort() 是最复杂最庞大的一个。这个算法接受两个 RandomAccessterators，然后将区间内的所有元素以渐增方式由小到人重新排列.第二个版本则允许用户指定一个仿函数，作为排序标准。STL 中，的所有关系型容器都拥有自动排序功能（底层结构采用 RB-tree，hashtable 不在标准的 STL 范围内），所以不需要用到这个 sort 算法。至于序列式容器中的 stack、queue 和 priority-queue 都有特别的出入口，不允许用户对元素排序。剩下 vector、deque 和 list，前两者的迭代器属于 RandomAccesslterators，适合使用 sort 算法，list 的迭代器则属于 BidirectionelI ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2023/10/22/2023-10-22-1/" title="从零开始的 STL 实现记录：Algorithm-4.4"><img class="post-bg" src="https://s2.loli.net/2023/08/18/cDqb7yXhnK6rkpN.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="从零开始的 STL 实现记录：Algorithm-4.4"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/10/22/2023-10-22-1/" title="从零开始的 STL 实现记录：Algorithm-4.4">从零开始的 STL 实现记录：Algorithm-4.4</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time class="post-meta-date-created" datetime="2023-10-22T19:39:56.000Z" title="Created 2023-10-22 19:39:56">2023-10-22</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2024-10-24T08:59:28.000Z" title="Updated 2024-10-24 08:59:28">2024-10-24</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/C/">C++</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/C/STL/">STL</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/C/">C++</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/STL/">STL</a></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-comments"></i><a class="twikoo-count" href="/2023/10/22/2023-10-22-1/#post-comment"><i class="fa-solid fa-spinner fa-spin"></i></a><span class="article-meta-label"> comments</span></span></div><div class="content">前言
本节将会分析 merge 与 inplace_merge 的实现，二者的作用都是合并两个有序的区间，不同之处在于 inplace_merge 是原地合并，会更加复杂。
merge
merge() 的作用为将 [first1, last1)、[first2, last2) 两个有序区间的元素合并到以 result 为起始的空间中，重载版本接受一个仿函数 comp 来比较元素的大小，原理十分简单，这里就直接附上代码。
123456789101112131415161718192021222324252627/*****************************************************************************************/// merge// 要求两个序列有序// 将两个经过排序的集合 S1 和 S2 合并起来置于另一段空间，返回一个迭代器指向最后一个元素的下一位置/****************************************************************************** ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2023/10/21/2023-10-21-1/" title="从零开始的 STL 实现记录：Algorithm-4.3"><img class="post-bg" src="https://s2.loli.net/2023/08/18/cDqb7yXhnK6rkpN.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="从零开始的 STL 实现记录：Algorithm-4.3"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/10/21/2023-10-21-1/" title="从零开始的 STL 实现记录：Algorithm-4.3">从零开始的 STL 实现记录：Algorithm-4.3</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time class="post-meta-date-created" datetime="2023-10-21T22:03:41.000Z" title="Created 2023-10-21 22:03:41">2023-10-21</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2024-10-24T08:59:28.000Z" title="Updated 2024-10-24 08:59:28">2024-10-24</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/C/">C++</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/C/STL/">STL</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/C/">C++</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/STL/">STL</a></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-comments"></i><a class="twikoo-count" href="/2023/10/21/2023-10-21-1/#post-comment"><i class="fa-solid fa-spinner fa-spin"></i></a><span class="article-meta-label"> comments</span></span></div><div class="content">前言
本节将会分析 stl_algo.h 中 next_permutation 与 prev_premutation 的实现，之所以分析这两个函数倒不是因为他们的实现有多么精彩（像 copy() 那样），而是“下一个排列”与“上一个排列”这种问题十分经典，解法也很固定。
STL 提供了两个用来计算排列组合关系的算法，分别是 next_permucation 和 prev_permutation。首先我们必须了解什么是“下一个”排列组合,什么是“前一个”排列组合。考虑三个字符所组成的序列 &#123;a,b,c&#125;。这个序列有六个可能的排列组合: abc，acb，bac，bca，cab，cba。这些排列组合根据 less-than 操作符做字典顺序的排序。也就是说，abc 名列第一，因为每一个元素都小于其后的元素。acb是次一个排列组合，因为它是固定了a（序列内最小元素）之后所做的新组合。同样道理、那些固定b （序列内次小元素）而做的排列组合，在次序上将先于那些固定 c 而做的排列组合。以 bac 和 bca 为例，bac 在 bca之前，因为序列 ac 小于序列 ca。面对bc ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2023/10/20/2023-10-20-1/" title="从零开始的 STL 实现记录：Algorithm-4.2"><img class="post-bg" src="https://s2.loli.net/2023/08/18/cDqb7yXhnK6rkpN.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="从零开始的 STL 实现记录：Algorithm-4.2"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/10/20/2023-10-20-1/" title="从零开始的 STL 实现记录：Algorithm-4.2">从零开始的 STL 实现记录：Algorithm-4.2</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time class="post-meta-date-created" datetime="2023-10-20T21:59:57.000Z" title="Created 2023-10-20 21:59:57">2023-10-20</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2024-10-24T08:59:28.000Z" title="Updated 2024-10-24 08:59:28">2024-10-24</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/C/">C++</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/C/STL/">STL</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/C/">C++</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/STL/">STL</a></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-comments"></i><a class="twikoo-count" href="/2023/10/20/2023-10-20-1/#post-comment"><i class="fa-solid fa-spinner fa-spin"></i></a><span class="article-meta-label"> comments</span></span></div><div class="content">前言
本节就来分析一下 rotate 的实现。为什么前言就一句话！
rotate
rotate 的作用为将 [first,middle) 内的元素和 [middle,last) 内的元素互换。middle 所指的元素会成为容器的第个元素。如果有个数字序列 &#123; 1,2,3,4,5,6,7&#125;，对元素 3 做旋转操作，会形成 &#123;3,4,5,6,7,1,2&#125;。rotate() 可以交换两个长度不同的区间，如下所示。

做过力扣189. 轮转数组 的人都知道，实现这种效果最简单的方法就是分别在前半段，后半段以及整个区间上各翻转一次，这里的前后段以 middle 分界，这样就可以达到 rotate 的效果，并且代码也最好理解。
当然，STL 中的 rotate 函数仍然不是简单地这样实现的，按照《STL 源码剖析》，rotate 函数的全貌如下：
12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2023/10/19/2023-10-19-1/" title="从零开始的 STL 实现记录：Algorithm-4.1"><img class="post-bg" src="https://s2.loli.net/2023/08/18/cDqb7yXhnK6rkpN.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="从零开始的 STL 实现记录：Algorithm-4.1"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/10/19/2023-10-19-1/" title="从零开始的 STL 实现记录：Algorithm-4.1">从零开始的 STL 实现记录：Algorithm-4.1</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time class="post-meta-date-created" datetime="2023-10-19T15:07:27.000Z" title="Created 2023-10-19 15:07:27">2023-10-19</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2024-10-24T08:59:28.000Z" title="Updated 2024-10-24 08:59:28">2024-10-24</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/C/">C++</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/C/STL/">STL</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/C/">C++</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/STL/">STL</a></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-comments"></i><a class="twikoo-count" href="/2023/10/19/2023-10-19-1/#post-comment"><i class="fa-solid fa-spinner fa-spin"></i></a><span class="article-meta-label"> comments</span></span></div><div class="content">前言
从本节开始，将会分析 algo.h 中的算法，这部分的算法有很多，也不可能逐一分析，因此这里就挑几个典型且重要的进行分析，即使这样依然有很多啊喂，主要会分析 equal_range、rotate、next_permutation、merge、sort、nth_element，其他的函数如果读者感兴趣的话可以自行查看 STL 的实现。
equal_range
算法 equal_range 是二分查找法的一个版本，试图在已排序的 (first, last) 中寻找 value。它返回一对迭代器 i 和 j，其中 i 是在不破坏次序的前提下，value 可插入的第一个位置（亦即lower_bound）,j 则是在不破坏次序的前提下, value 可插入的最后一个位置（亦即upper_bound）。
当 (first, last) 并未含有与 vaiue 相同的任何元素时，返回的区间将是一个空区间，即返回的 i 和 j 指向同一个位置。
这个函数的效果有点类似于 python 中的 bisect_left 和 bisect_right 综合后的结果，STL 中与此对应的二分查找算法为 l ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2023/10/18/2023-10-18-1/" title="从零开始的 STL 实现记录：Algorithm-3"><img class="post-bg" src="https://s2.loli.net/2023/08/18/cDqb7yXhnK6rkpN.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="从零开始的 STL 实现记录：Algorithm-3"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/10/18/2023-10-18-1/" title="从零开始的 STL 实现记录：Algorithm-3">从零开始的 STL 实现记录：Algorithm-3</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time class="post-meta-date-created" datetime="2023-10-18T19:58:30.000Z" title="Created 2023-10-18 19:58:30">2023-10-18</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2024-10-24T08:59:28.000Z" title="Updated 2024-10-24 08:59:28">2024-10-24</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/C/">C++</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/C/STL/">STL</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/C/">C++</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/STL/">STL</a></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-comments"></i><a class="twikoo-count" href="/2023/10/18/2023-10-18-1/#post-comment"><i class="fa-solid fa-spinner fa-spin"></i></a><span class="article-meta-label"> comments</span></span></div><div class="content">前言
本节将会分析 algobase.h 中的算法，algobase.h 中存放的都是一些比较基础的算法，如 max()、min()、copy() 等，这里就挑其中最具有代表性的 copy() 函数来分析，除了 copy() 外还有许多如 copy_backward()、move()、move_backward() 等函数，STL 对这些函数效率上的优化方式与 copy() 的处理基本是一致的，就不再分析。
copy
不论是对客端程序或对 STL 内部而言，copy() 都是一个常常被调用的函数。由于 copy 进行的是复制操作，而复制操作不外乎运用 assignment operator 或 copy constructor （copy算法用的是前者），但是某些元素型别拥有的是 trivialassignment operator，因此，如果能够使用内存直接复制行为（例如标准函数 memmove 或 memcpy），便能够节省大量时间。为此，SGI STL的copy 算法用尽各种办法，包括函数重载（function overloading）、型别特性（type traits）、偏特化 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2023/10/17/2023-10-17-1/" title="从零开始的 STL 实现记录：Algorithm-2"><img class="post-bg" src="https://s2.loli.net/2023/08/18/cDqb7yXhnK6rkpN.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="从零开始的 STL 实现记录：Algorithm-2"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/10/17/2023-10-17-1/" title="从零开始的 STL 实现记录：Algorithm-2">从零开始的 STL 实现记录：Algorithm-2</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">Created</span><time class="post-meta-date-created" datetime="2023-10-17T16:47:50.000Z" title="Created 2023-10-17 16:47:50">2023-10-17</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2024-10-24T08:59:28.000Z" title="Updated 2024-10-24 08:59:28">2024-10-24</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/C/">C++</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/C/STL/">STL</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/C/">C++</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/STL/">STL</a></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-comments"></i><a class="twikoo-count" href="/2023/10/17/2023-10-17-1/#post-comment"><i class="fa-solid fa-spinner fa-spin"></i></a><span class="article-meta-label"> comments</span></span></div><div class="content">前言
上一节介绍了 STL 中算法的分类以及泛化过程，这一节将介绍数值算法以及集合相关的算法，这部分算法包含在 STL 的 stl_numeric.h 以及 algo.h 中，在 TinySTL 中被放在 numeric.h 以及 set_algo.h 中。
numeric 算法
数值算法中主要包括四个算法：accumulate、adjacent_difference、inner_product、partial_sum，这些算法都不会改变处理区间的值，即都是非质变算法。
accumulate
accumulate(first, last, init) 的作用为对 [first, last) 内的元素进行以 init 为初值的累加，并返回求和的结果。
重载版本可以接收一个二元仿函数，以初值 init 对每个元素进行二元操作。
1234567891011121314151617181920212223/*****************************************************************************************/// ac ...</div></div></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/page/4/#content-inner"><i class="fas fa-chevron-left fa-fw"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/#content-inner">4</a><span class="page-number current">5</span><a class="page-number" href="/page/6/#content-inner">6</a><span class="space">&hellip;</span><a class="page-number" href="/page/9/#content-inner">9</a><a class="extend next" rel="next" href="/page/6/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://s2.loli.net/2023/08/12/NkcT1PLmZVj5iY3.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Qliphoth</div><div class="author-info__description">See You Next Game</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">123</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">21</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">21</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/qlipphoth"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/qlipphoth" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="https://space.bilibili.com/33030427" target="_blank" title="Bilibili"><i class="fab fa-bilibili" style="color: #FB7299;"></i></a><a class="social-icon" href="mailto:1841362281@qq.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a></div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2024/10/23/2024-10-23-1/" title="Unity 补完计划（四）：UGUI-13：InputField"><img src="https://s2.loli.net/2024/07/14/2wNJafA1kFbesZy.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Unity 补完计划（四）：UGUI-13：InputField"/></a><div class="content"><a class="title" href="/2024/10/23/2024-10-23-1/" title="Unity 补完计划（四）：UGUI-13：InputField">Unity 补完计划（四）：UGUI-13：InputField</a><time datetime="2024-10-23T20:51:53.000Z" title="Created 2024-10-23 20:51:53">2024-10-23</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/10/17/2024-10-17-1/" title="Unity 补完计划（四）：UGUI-12：Toggle &amp; ToggleGroup &amp; Slider"><img src="https://s2.loli.net/2024/07/14/2wNJafA1kFbesZy.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Unity 补完计划（四）：UGUI-12：Toggle &amp; ToggleGroup &amp; Slider"/></a><div class="content"><a class="title" href="/2024/10/17/2024-10-17-1/" title="Unity 补完计划（四）：UGUI-12：Toggle &amp; ToggleGroup &amp; Slider">Unity 补完计划（四）：UGUI-12：Toggle &amp; ToggleGroup &amp; Slider</a><time datetime="2024-10-17T13:37:18.000Z" title="Created 2024-10-17 13:37:18">2024-10-17</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/10/15/2024-10-15-2/" title="Unity 补完计划（四）：UGUI-11：Selectable &amp; Button"><img src="https://s2.loli.net/2024/07/14/2wNJafA1kFbesZy.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Unity 补完计划（四）：UGUI-11：Selectable &amp; Button"/></a><div class="content"><a class="title" href="/2024/10/15/2024-10-15-2/" title="Unity 补完计划（四）：UGUI-11：Selectable &amp; Button">Unity 补完计划（四）：UGUI-11：Selectable &amp; Button</a><time datetime="2024-10-15T14:50:21.000Z" title="Created 2024-10-15 14:50:21">2024-10-15</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/10/15/2024-10-15-1/" title="Unity 补完计划（四）：UGUI-11：Text"><img src="https://s2.loli.net/2024/07/14/2wNJafA1kFbesZy.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Unity 补完计划（四）：UGUI-11：Text"/></a><div class="content"><a class="title" href="/2024/10/15/2024-10-15-1/" title="Unity 补完计划（四）：UGUI-11：Text">Unity 补完计划（四）：UGUI-11：Text</a><time datetime="2024-10-15T12:39:09.000Z" title="Created 2024-10-15 12:39:09">2024-10-15</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/10/14/2024-10-14-1/" title="Unity 补完计划（四）：UGUI-10：Image &amp; RawImage"><img src="https://s2.loli.net/2024/07/14/2wNJafA1kFbesZy.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Unity 补完计划（四）：UGUI-10：Image &amp; RawImage"/></a><div class="content"><a class="title" href="/2024/10/14/2024-10-14-1/" title="Unity 补完计划（四）：UGUI-10：Image &amp; RawImage">Unity 补完计划（四）：UGUI-10：Image &amp; RawImage</a><time datetime="2024-10-14T13:21:13.000Z" title="Created 2024-10-14 13:21:13">2024-10-14</time></div></div></div></div><div class="card-widget" id="card-newest-comments"><div class="item-headline"><i class="fas fa-comment-dots"></i><span>Newest Comments</span></div><div class="aside-list"><span>loading...</span></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>Categories</span>
            <a class="card-more-btn" href="/categories/" title="More">
    <i class="fas fa-angle-right"></i></a>
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Blog/"><span class="card-category-list-name">Blog</span><span class="card-category-list-count">2</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/C/"><span class="card-category-list-name">C++</span><span class="card-category-list-count">41</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/C/STL/"><span class="card-category-list-name">STL</span><span class="card-category-list-count">41</span></a></li></ul></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/DL/"><span class="card-category-list-name">DL</span><span class="card-category-list-count">3</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/DL/NLP/"><span class="card-category-list-name">NLP</span><span class="card-category-list-count">2</span></a></li></ul></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Deep-Learning/"><span class="card-category-list-name">Deep Learning</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Lua/"><span class="card-category-list-name">Lua</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/NERV/"><span class="card-category-list-name">NERV</span><span class="card-category-list-count">49</span></a></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>Tags</span></div><div class="card-tag-cloud"><a href="/tags/C/" style="font-size: 1.45em; color: rgb(112, 71, 76)">C++</a><a href="/tags/STL/" style="font-size: 1.42em; color: rgb(166, 183, 157)">STL</a><a href="/tags/UE/" style="font-size: 1.39em; color: rgb(63, 46, 141)">UE</a><a href="/tags/LeetCode/" style="font-size: 1.15em; color: rgb(31, 79, 90)">LeetCode</a><a href="/tags/GAS/" style="font-size: 1.24em; color: rgb(196, 78, 53)">GAS</a><a href="/tags/%E5%9B%BE%E5%BD%A2%E5%AD%A6/" style="font-size: 1.3em; color: rgb(96, 39, 107)">图形学</a><a href="/tags/NLP/" style="font-size: 1.18em; color: rgb(33, 2, 200)">NLP</a><a href="/tags/DeepLearning/" style="font-size: 1.21em; color: rgb(54, 177, 87)">DeepLearning</a><a href="/tags/Blog/" style="font-size: 1.18em; color: rgb(59, 120, 197)">Blog</a><a href="/tags/Hexo/" style="font-size: 1.18em; color: rgb(47, 185, 68)">Hexo</a><a href="/tags/Butterfly/" style="font-size: 1.18em; color: rgb(43, 53, 42)">Butterfly</a><a href="/tags/Github-Page/" style="font-size: 1.15em; color: rgb(122, 87, 27)">Github-Page</a><a href="/tags/Github-Action/" style="font-size: 1.15em; color: rgb(148, 100, 188)">Github-Action</a><a href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" style="font-size: 1.15em; color: rgb(81, 142, 66)">数据结构</a><a href="/tags/%E6%A0%91/" style="font-size: 1.15em; color: rgb(102, 86, 9)">树</a><a href="/tags/Unity/" style="font-size: 1.36em; color: rgb(179, 182, 14)">Unity</a><a href="/tags/C/" style="font-size: 1.33em; color: rgb(191, 112, 145)">C#</a><a href="/tags/%E6%B8%B8%E6%88%8F%E6%9D%82%E8%B0%88/" style="font-size: 1.15em; color: rgb(145, 158, 83)">游戏杂谈</a><a href="/tags/Deep-Learning/" style="font-size: 1.15em; color: rgb(18, 147, 155)">Deep Learning</a><a href="/tags/Lua/" style="font-size: 1.15em; color: rgb(184, 150, 58)">Lua</a><a href="/tags/OS/" style="font-size: 1.27em; color: rgb(76, 155, 83)">OS</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>Archives</span><a class="card-more-btn" href="/archives/" title="More">
    <i class="fas fa-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/10/"><span class="card-archive-list-date">October 2024</span><span class="card-archive-list-count">6</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/09/"><span class="card-archive-list-date">September 2024</span><span class="card-archive-list-count">5</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/08/"><span class="card-archive-list-date">August 2024</span><span class="card-archive-list-count">9</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/07/"><span class="card-archive-list-date">July 2024</span><span class="card-archive-list-count">9</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/04/"><span class="card-archive-list-date">April 2024</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/03/"><span class="card-archive-list-date">March 2024</span><span class="card-archive-list-count">9</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/02/"><span class="card-archive-list-date">February 2024</span><span class="card-archive-list-count">2</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/01/"><span class="card-archive-list-date">January 2024</span><span class="card-archive-list-count">5</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>Info</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">Article :</div><div class="item-count">123</div></div><div class="webinfo-item"><div class="item-name">Run time :</div><div class="item-count" id="runtimeshow" data-publishDate="2022-08-30T00:00:00.000Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">Total Count :</div><div class="item-count">430.2k</div></div><div class="webinfo-item"><div class="item-name">UV :</div><div class="item-count" id="busuanzi_value_site_uv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">PV :</div><div class="item-count" id="busuanzi_value_site_pv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">Last Push :</div><div class="item-count" id="last-push-date" data-lastPushDate="2024-10-24T09:00:24.312Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('https://s2.loli.net/2023/12/02/GXjKIgFLskvSHTi.png')"><div id="footer-wrap"><div class="copyright">&copy;2022 - 2024 By Qliphoth</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="translateLink" type="button" title="Switch Between Traditional Chinese And Simplified Chinese">繁</button><button id="darkmode" type="button" title="Switch Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between single-column and double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="Back To Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"><script>(() => { 
  const getCommentUrl = () => {
    const eleGroup = document.querySelectorAll('#recent-posts .article-title')
    let urlArray = []
    eleGroup.forEach(i=>{
      urlArray.push(i.getAttribute('href'))
    })
    return urlArray
  }

  const getCount = () => {
    const runTwikoo = () => {
      twikoo.getCommentsCount({
        envId: 'https://qliphoth.netlify.app/.netlify/functions/twikoo',
        region: '',
        urls: getCommentUrl(),
        includeReply: false
      }).then(function (res) {
        document.querySelectorAll('#recent-posts .twikoo-count').forEach((item,index) => {
          item.textContent = res[index].count
        })
      }).catch(function (err) {
        console.log(err)
      })
    }

      if (typeof twikoo === 'object') {
        runTwikoo()
      } else {
        getScript('https://cdn.jsdelivr.net/npm/twikoo/dist/twikoo.all.min.js').then(runTwikoo)
      }
  }

  window.pjax ? getCount() : window.addEventListener('load', getCount)

})()</script><script>window.typedJSFn = {
  init: (str) => {
    window.typed = new Typed('#subtitle', Object.assign({
      strings: str,
      startDelay: 300,
      typeSpeed: 150,
      loop: true,
      backSpeed: 50,
    }, null))
  },
  run: (subtitleType) => {
    if (true) {
      if (typeof Typed === 'function') {
        subtitleType()
      } else {
        getScript('https://cdn.jsdelivr.net/npm/typed.js/dist/typed.umd.min.js').then(subtitleType)
      }
    } else {
      subtitleType()
    }
  }
}
</script><script>function subtitleType () {
  getScript('https://sdk.jinrishici.com/v2/browser/jinrishici.js').then(() => {
    jinrishici.load(result =>{
      if (true) {
        const sub = ["If you want it, then you have to take it."]
        const content = result.data.content
        sub.unshift(content)
        typedJSFn.init(sub)
      } else {
        document.getElementById('subtitle').textContent = result.data.content
      }
    })
  })
}
typedJSFn.run(subtitleType)
</script></div><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[image]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[link]') // replace url
    content = content.replace(/<pre><code>.*?<\/pre>/gi, '[code]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const getComment = () => {
    const runTwikoo = () => {
      twikoo.getRecentComments({
        envId: 'https://qliphoth.netlify.app/.netlify/functions/twikoo',
        region: '',
        pageSize: 6,
        includeReply: true
      }).then(function (res) {
        const twikooArray = res.map(e => {
          return {
            'content': changeContent(e.comment),
            'avatar': e.avatar,
            'nick': e.nick,
            'url': e.url + '#' + e.id,
            'date': new Date(e.created).toISOString()
          }
        })

        saveToLocal.set('twikoo-newest-comments', JSON.stringify(twikooArray), 10/(60*24))
        generateHtml(twikooArray)
      }).catch(function (err) {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.textContent= "Unable to get the data, please make sure the settings are correct."
      })
    }

    if (typeof twikoo === 'object') {
      runTwikoo()
    } else {
      getScript('https://cdn.jsdelivr.net/npm/twikoo/dist/twikoo.all.min.js').then(runTwikoo)
    }
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (true) {
          const name = 'src'
          result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'></a>`
        }
        
        result += `<div class='content'>
        <a class='comment' href='${array[i].url}' title='${array[i].content}'>${array[i].content}</a>
        <div class='name'><span>${array[i].nick} / </span><time datetime="${array[i].date}">${btf.diffDate(array[i].date, true)}</time></div>
        </div></div>`
      }
    } else {
      result += 'No Comment'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom.innerHTML= result
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('twikoo-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><div class="aplayer no-destroy" data-id="8654234284" data-server="netease" data-type="playlist" data-fixed="true" data-autoplay="false"> </div><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = false;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/metingjs/dist/Meting.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener scroll 
  window.tocScrollFn && window.removeEventListener('scroll', window.tocScrollFn)
  window.scrollCollect && window.removeEventListener('scroll', scrollCollect)

  document.getElementById('rightside').style.cssText = "opacity: ''; transform: ''"
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

  typeof disqusjs === 'object' && disqusjs.destroy()
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><!-- hexo injector body_end start -->
  <script data-pjax src="https://cdn.jsdelivr.net/gh/Zfour/hexo-github-calendar@1.21/hexo_githubcalendar.js"></script>
  <script data-pjax>
        function GithubCalendarConfig(){
            var git_githubapiurl ="https://hexo-api-khaki.vercel.app/api/?user=qlipphoth";
            var git_color =['#ebedf0', '#fdcdec', '#fc9bd9', '#fa6ac5', '#f838b2', '#f5089f', '#c4067e', '#92055e', '#540336', '#48022f', '#30021f'];
            var git_user ="qlipphoth";
            var parent_div_git = document.getElementById('recent-posts');
            var git_div_html = '<div class="recent-post-item" style="width:100%;height:auto;padding:10px;"><div id="github_loading" style="width:10%;height:100%;margin:0 auto;display: block"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"  viewBox="0 0 50 50" style="enable-background:new 0 0 50 50" xml:space="preserve"><path fill="#d0d0d0" d="M25.251,6.461c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615V6.461z" transform="rotate(275.098 25 25)"><animateTransform attributeType="xml" attributeName="transform" type="rotate" from="0 25 25" to="360 25 25" dur="0.6s" repeatCount="indefinite"></animateTransform></path></svg></div><div id="github_container"></div></div>';
            if(parent_div_git && location.pathname =='/'){
                console.log("已挂载hexo-github-calendar https://github.com/Barry-Flynn/hexo-github-calendar");
                // parent_div_git.innerHTML=git_div_html+parent_div_git.innerHTML // 无报错，但不影响使用(支持pjax跳转)
                parent_div_git.insertAdjacentHTML("afterbegin",git_div_html) // 有报错，但不影响使用(支持pjax跳转)
            };
            GithubCalendar(git_githubapiurl,git_color,git_user)
        }
        if(document.getElementById('recent-posts')){
            GithubCalendarConfig()
        }
    </script>
    <style>#github_container{min-height:280px}@media screen and (max-width:650px) {#github_container{background-image:;min-height:0px}}</style>
    <style></style><script data-pjax>function electric_clock_injector_config(){
                var parent_div_git = document.getElementsByClassName('sticky_layout')[0];
                var item_html = '<div class="card-widget card-clock"><div class="card-glass"><div class="card-background"><div class="card-content"><div id="hexo_electric_clock"><img id="card-clock-loading" src="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-clock/clock/images/weather/loading.gif" style="height: 120px; width: 100%;" data-ll-status="loading" class="entered loading"></div></div></div></div></div>';
                console.log('已挂载electric_clock')
                // parent_div_git.innerHTML=item_html+parent_div_git.innerHTML // 无报错，但不影响使用(支持pjax跳转)
                parent_div_git.insertAdjacentHTML("afterbegin",item_html) // 有报错，但不影响使用(支持pjax跳转)
            }if( document.getElementsByClassName('sticky_layout')[0] && (location.pathname ==='/'|| '/' ==='all')){

            electric_clock_injector_config()
        } </script><script src="https://pv.sohu.com/cityjson?ie=utf-8"></script><script data-pjax  src="https://cdn.jsdelivr.net/gh/Zfour/hexo-electric-clock@1.0.6/clock.js"></script><script data-pjax>
  function butterfly_footer_beautify_injector_config(){
    var parent_div_git = document.getElementById('footer-wrap');
    var item_html = '<div id="workboard"></div><div id="ghbdages" style="overflow:hidden;max-height:90px;height:auto;text-align:center;margin-top:10px"><div class="swiper-wrapper"><div class="swiper-slide"><a class="github-badge" target="_blank" href="https://hexo.io/" style="margin-inline:5px" title="博客框架为Hexo_v5.4.0"><img src="https://img.shields.io/badge/Frame-Hexo-blue?style=flat&amp;logo=hexo" alt=""/></a><a class="github-badge" target="_blank" href="https://butterfly.js.org/" style="margin-inline:5px" title="主题版本Butterfly_v3.8.2"><img src="https://img.shields.io/badge/Theme-Butterfly-6513df?style=flat&amp;logo=bitdefender" alt=""/></a><a class="github-badge" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" style="margin-inline:5px" title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可"><img src="https://img.shields.io/badge/Copyright-BY--NC--SA%204.0-d42328?style=flat&amp;logo=Claris" alt=""/></a></div></div></div><style>a.github-badge:hover:before {display:none}</style>';
    console.log('已挂载butterfly_footer_beautify')
    parent_div_git.insertAdjacentHTML("beforeend",item_html)
    }
  var elist = 'null'.split(',');
  var cpage = location.pathname;
  var epage = 'all';
  var flag = 0;

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_footer_beautify_injector_config();
  }
  else if (epage === cpage){
    butterfly_footer_beautify_injector_config();
  }
  </script><script async src="/js/runtime.js"></script><script defer src="https://unpkg.zhimg.com/hexo-butterfly-swiper/lib/swiper.min.js"></script><script defer data-pjax src="https://unpkg.zhimg.com/hexo-butterfly-footer-beautify/lib/swiperbdage_init.min.js"></script><!-- hexo injector body_end end --></body></html>